
## 概要

「nginx 実践ガイド」(渡辺高志 著) (インプレス) の学習のための docker 環境構築メモである.

御著書(以降「nginx 実践ガイド」)は、物理ホスト上に nginx やその他サービスを導入する前提になっている.

そこで、Docker 上に「nginx 実践ガイド」の検証環境を構築するための手順を記す.

　

つまり、本記事は次の方針で記したものである. 従って nginx 設定については触れていない.

```
・物理ホストを汚さずに「nginx 実践ガイド」の学習ができるように、docker 上に同環境を作る手順を記す
・ただし、「nginx 実践ガイド」の無断転載にならぬように nginx に関する内容は記さない
```

　

## システム構成図

Nginx の設定を変更したい場合は PV/etc/nginx/conf.d/default.conf を編集する.

本サンプルでは、PV/SHARE/www/dir/. に公開したいファイルを配置する.

```
  ホスト
  +--------------------------------------------------------------+
  |                                                              |
  |                                                              |
  |                                 nginxコンテナ                |
  |                               +-----------------------+      |
  |                               |                       |      |
  |  PV/etc/nginx/  <-----------------> /etc/nginx/       |      |
  |                               |                       |      |
  |  PV/SHARE/www/dir/ <--------------> /www/dir/         |      |
  |               A               |                       |      |
  |               |        +------|------+                |      |
  |               |        |51338 |  80  |                |      |
  |               |        +------|------+                |      |
  |               |               +-----------------------+      |
  |               |                                              |
  |               |                 jekyll コンテナ              |
  |               |               +-----------------------+      |
  |               |               |                       |      |
  |               +-------------------> /srv/jekyll/      |      |
  |                               |                       |      |
  |                               |------+                |      |
  |                               | 4000 |                |      |
  |                               |------+                |      |
  |                               +-----------------------+      |
  |                                                              |
  |                                                              |
  +--------------------------------------------------------------+

```

　

## 使用方法

### 起動

```bash
$ docker-compose up -d
```

### 更新

```bash
$ docker-compose stop
$ docker-compose rm -f
$ docker-compose up -d
```
